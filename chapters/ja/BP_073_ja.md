## 必要な場合のみデータベースへの接続を行う

### 識別子

| GreenIT |  V2  |  V3  |  V4  |
|:-------:|:----:|:----:|:----:|
|   56   | 72  | 73  |      |

### カテゴリ

| ライフサイクル |  サードパーティ  |  担当者  |
|:---------:|:----:|:----:|
| 2. 設計 | データセンター | ソフトウェアアーキテクト/開発者 |

### 効果

| 優先度 |      実装難易度       |  エコロジーへの影響度    |
|:-------------------:|:-------------------------:|:---------------------:|
| 3 | 3 | 3 |

|リソース                                      |
|:----------------------------------------------------------:|
| プロセッサ  / RAM / ネットワーク   |

### 説明
データベースの種類に関わらず、接続のオープンはクライアントとサーバーの両方にとってリソースを大量に消費するプロセスです :
*	メモリの割り当てとディスクI/Oのためのバッファ
*	接続プロトコルに必要なネットワークの往復
*	CPUのコスト

例 :  Oracleの場合、複数の往復が必要です（資格情報の検証、ドライバー情報、最適なパケットサイズの交渉など）。
接続を開いて閉じる行為は、これらのリソースの割り当てと解放、および多数のネットワーク通信を毎回必要とします。

通常使用される良い実践は、接続プールを設定することです。
これにより、接続管理とパフォーマンスが最適化されます。ただし、その設定は必ずしも簡単な操作ではありません（適切な設定を見つけるためにその挙動を監視する必要があります）。

というわけで、アプリケーションがデータベースへのアクセスを避けることができるなら、そのようにしましょう！
### 例

HikariCPは、頑健で高性能なJDBCの接続プールです。SpringBootに統合されています。

接続プールが存在しない場面で、一つの接続を再利用し、各リクエストで新しい接続を開いて閉じることを避けます。


### 検証原理

| 検証項目     | 次の値以下である   |  
|-------------------|:-------------------------:|
|  サービスの使用に不必要なデータを問い合わせ、保存するためのデータベースへの接続数 | 0  |
